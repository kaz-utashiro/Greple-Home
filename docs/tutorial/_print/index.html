<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.106.0"><link rel=canonical type=text/html href=http://kaz-utashiro.github.io/Greple-Home/docs/tutorial/><link rel=alternate type=application/rss+xml href=http://kaz-utashiro.github.io/Greple-Home/docs/tutorial/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/Greple-Home/favicons/favicon.ico><link rel=apple-touch-icon href=/Greple-Home/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/Greple-Home/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/Greple-Home/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/Greple-Home/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/Greple-Home/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/Greple-Home/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/Greple-Home/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/Greple-Home/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/Greple-Home/favicons/android-192x192.png sizes=192x192><title>Tutorial | Greple Home</title><meta name=description content="The most popular HTML, CSS, and JS library in the world."><meta property="og:title" content="Tutorial"><meta property="og:description" content="The most popular HTML, CSS, and JS library in the world."><meta property="og:type" content="website"><meta property="og:url" content="http://kaz-utashiro.github.io/Greple-Home/docs/tutorial/"><meta itemprop=name content="Tutorial"><meta itemprop=description content="The most popular HTML, CSS, and JS library in the world."><meta name=twitter:card content="summary"><meta name=twitter:title content="Tutorial"><meta name=twitter:description content="The most popular HTML, CSS, and JS library in the world."><link rel=preload href=/Greple-Home/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css as=style><link href=/Greple-Home/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-00000000-0")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/Greple-Home/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Greple Home</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/Greple-Home/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/Greple-Home/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/Greple-Home/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/Greple-Home/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/Greple-Home/docs/tutorial/>Return to the regular view of this page</a>.</p></div><h1 class=title>Tutorial</h1><ul><li>1: <a href=#pg-9479fc547c3e2ef6eed44ed773522399>はじめに</a></li><li>2: <a href=#pg-b7ef3b70da47538f0b1591fdd0a851e9>単純な検索</a></li><li>3: <a href=#pg-6e66e63e0e98d33b5933a5c3d6a6dcf7>複数キーワードによる検索</a></li><li>4: <a href=#pg-2fcfbe6d31252be26165254110ee5e99>複数キーワード検索 OR</a></li><li>5: <a href=#pg-c0e9f643f94cf8ef0f727030f187929a>複数キーワード検索 NOT</a></li><li>6: <a href=#pg-56e69f334e30488749b06714811e3936>複数キーワード検索 MUST</a></li><li>7: <a href=#pg-8e8231b205c27a4c40af51c00c4861e8>複数キーワード検索 単独オプション</a></li><li>8: <a href=#pg-34b4e734da2c7382d5b9aac2f1da2e45>検索範囲指定 --inside/--outside</a></li><li>9: <a href=#pg-23de3058028259a4afd6f266d429a7cd>検索範囲指定 --include/--exclude</a></li><li>10: <a href=#pg-47694884aad84257ac9484005ff539d8>検索ブロック指定</a></li><li>11: <a href=#pg-2af880627899c600811e0040ed353fb9>拡張モジュールの使用法</a></li><li>12: <a href=#pg-07ed18d49b10c15084cada1e4a38e2e7>初期設定ファイル .greplerc</a></li><li>13: <a href=#pg-3647e986fe9e3d773ea005ac779891c5>カラーオプション</a></li><li>14: <a href=#pg-94222baf73909a02fdd3684609a95d37>カラーオプション（続き）</a></li><li>15: <a href=#pg-ef71313ddea7d2eecc1ad2577b6c4c31>カラーマップの切り替え</a></li><li>16: <a href=#pg-2e40b66333be3270d6b692339543e9c3>入出力フィルター</a></li><li>17: <a href=#pg-50d942c779279dc068ccf2ebe25527c0>関数インタフェース</a></li><li>18: <a href=#pg-e00b10687c133cf7f22c415e217da42c>関数オプション</a></li><li>19: <a href=#pg-9b5526be7a45fd5b82b77d95894dd985>モジュールの作り方 (1)</a></li><li>20: <a href=#pg-1f4093deaf17467e75033a246e80500c>モジュールの作り方 (2)</a></li></ul><div class=content><p>Qiita の 2021 アドベントカレンダーに書いた Greple チュートリアルです。</p></div></div><div class=td-content><h1 id=pg-9479fc547c3e2ef6eed44ed773522399>1 - はじめに</h1><h2 id=greple>greple</h2><p>greple は、作者が1990年初頭から開発を続けているコマンドです。名前の通り Unix コマンドの grep と同じように、テキストから文字列を検索するためのものです。le は lexical expression の意味ですが、それについてはこれからおいおい説明していきます。</p><h2 id=読み方>読み方</h2><p>読み方は特に決めていませんが、なんとなく「ぐれっぷる」と呼んでいます。アクセントは「れ」にあったり、今時の平板化した読み方だったりと、人によって様々です。英語的に発音すると「ぐれぽー」みたいになるんでしょうか。</p><p>「ぐれっぷ・えるいー」と読んでもいいけど、長いですね。アメリカ人、なんでも単語化しようとしますしね。SCSI が「すかじー」になるくらいで。昔、PCMCIA を無理やり読んでいる人がいて驚いたことがあります。</p><h2 id=特徴>特徴</h2><p>greple は、以下のような特徴を持っています。</p><ul><li>複数のキーワードを指定することができる</li><li>行だけではなく、検索対象ブロックを柔軟に指定することができる</li><li>検索対象の範囲や条件を指定することができる</li><li>複数行に渡るパターンを検索することができる</li><li>多彩な色指定が可能</li><li>設定ファイルやモジュールによるカスタマイズ／拡張が可能</li><li>検索だけではなく、文字列処理のフレームワークとして機能する</li></ul><p>これらの特徴や使い方について、これから毎日少しずつ解説していこうと思います。</p><h2 id=想定される用途>想定される用途</h2><p>元々、文章の校正作業を楽にするために作ったもので、その後もまとまった翻訳の仕事が入る度に少しずつ拡張を続けてきました。そのため、それほど多くないテキストファイル（せいぜい書籍数冊分程度）に対して、様々な条件を科して検索やそれに類する処理を行うというのが想定される主な使い方です。</p><p>大量のデータを対象にするのであれば、それに適したツールが他にたくさんあるので、そういうものを使ってください。ちなみに、ripgrep というコマンドが高速かつ高機能です。</p><p>また、greple は、すべてのデータを読み込んでから処理するため、連続して生成されるデータを逐次処理していくような目的に使うことはできません。</p><h2 id=インストール>インストール</h2><p>greple は Perl で記述されていて、cpanminus (cpanm) を使ってインストールします。cpanminus の使い方や、Perl の環境設定については、他の記事を参照してください。cpan や cpanplus など、他のインストーラーでも正しく使えば問題ないはずですが、保証はできません。</p><pre tabindex=0><code>$ cpanm App::Greple
or
$ curl -sL http://cpanmin.us | perl - App::Greple
</code></pre><h2 id=リポジトリ>リポジトリ</h2><p>ソースコードは github で管理しています。cpan にも、ほぼ最新版が上がっているので、どちらからインストールしても同じです。<code>cpanm</code> コマンドで、github の URL を指定してインストールすることもできます。</p><ul><li><a href=https://github.com/kaz-utashiro/greple.git>https://github.com/kaz-utashiro/greple.git</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul><h2 id=関連記事>関連記事</h2><ul><li><a href=https://qiita.com/kaz-utashiro/items/85add653a71a7e01c415>https://qiita.com/kaz-utashiro/items/85add653a71a7e01c415</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8f4878300043ce7b73e7>https://qiita.com/kaz-utashiro/items/8f4878300043ce7b73e7</a></li><li><a href=https://qiita.com/kaz-utashiro/items/cde2b0df8b59b3627411>https://qiita.com/kaz-utashiro/items/cde2b0df8b59b3627411</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-b7ef3b70da47538f0b1591fdd0a851e9>2 - 単純な検索</h1><p>greple の最も単純な使い方は grep と同じです。</p><pre><code>greple pattern file
</code></pre><p>ファイルが指定されなければ、標準入力を対象にします。</p><p>grep と共通のオプションもあります。以下に挙げたものは、grep とほぼ同様の意味を持ちますが、挙動が若干違うものもあります。</p><ul><li><code>-n</code> 行番号を表示する</li><li><code>-i</code>: 大文字小文字を無視する</li><li><code>-A</code>, <code>-B</code>, <code>-C</code>: 前後の行を表示する</li><li><code>-o</code>: マッチした部分だけを表示する</li><li><code>-h</code>, <code>-H</code>: ファイル名の表示を制御する</li><li><code>-l</code>: マッチしたファイル名のみを表示する</li><li><code>-c</code>: マッチした数を表示する</li><li><code>-m</code>: 表示数を制御する</li></ul><h2 id=正規表現>正規表現</h2><p>greple は、特別なオプションを指定しなくても、パターンに Perl の正規表現をそのまま使うことができます。どのバージョンの正規表現が使えるかは、実行する処理系に依存します。</p><p>正規表現は、行単位ではなくファイル全体を対象としてマッチしますが、デフォルトで複数行マッチが有効になっていて、行頭・行末を示す <code>^</code>・<code>$</code> はすべての行にマッチします。</p><p>Perl 発祥の正規表現は PCRE (Perl Compatible Regular Expression) として、様々な言語やツールに組み込まれています。ripgrep の場合は、&ndash;pcre2 オプションをつけることで利用可能です。</p><h2 id=実行例>実行例</h2><p>次のようなファイルを用意してみました。某寿司チェーンのメニューを参考に少しアレンジしましたが、この程度ならまさか盗用とは言われないでしょう。このファイルに対して greple コマンドを実行してみます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sushi.txt data-lang=sushi.txt><span style=display:flex><span>サービスセット      熟成まぐろ えび たまご いか サーモン いなり ねぎまぐろ サラダ
</span></span><span style=display:flex><span>お子様セット        熟成まぐろ えび たまご いなり ツナサラダ
</span></span><span style=display:flex><span>特上セット          中とろ 熟成まぐろ 熟成真鯛 はまち 赤えび ほたて うなぎ かに いくら
</span></span><span style=display:flex><span>特上極旨セット      中とろ はまち かに いくら 赤えび サーモン うなぎ うに
</span></span><span style=display:flex><span>うどんセット        熟成まぐろ サーモン たまご えび うどん
</span></span><span style=display:flex><span>サラダ軍艦セット    えびマヨ ツナサラダ サラダ シーフードサラダ
</span></span><span style=display:flex><span>人気セット          熟成まぐろ 漬けまぐろ サーモン びんちょう いか えび えびアボカド たまご
</span></span><span style=display:flex><span>まぐろづくしセット  中とろ 熟成まぐろ ねぎまぐろ
</span></span><span style=display:flex><span>プレミアムセット    中とろ まぐろ サーモン 赤えび はまち うなぎ かに いくら
</span></span></code></pre></div><p>cat -n するとこうです。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/13af3c2c-d892-010a-f7a4-4d4435def5f6.png alt="スクリーンショット 2021-12-02 17.56.02.png"></p><h3 id=greple>greple</h3><p>行番号を表示する -n オプションをつけて greple を実行してみます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/f151a6ce-28bb-d728-7285-2499f756f674.png alt="スクリーンショット 2021-12-02 17.59.02.png"></p><p>greple は、このように、デフォルトで検索した文字列を色付きでハイライトして表示します。最近の検索系コマンドは大概カラー出力に対応しているので珍しくはありません。</p><h3 id=grep>grep</h3><p>grep は、&ndash;color オプションをつけることでカラー出力ができます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/821fb8cb-7cc7-0a9d-dca4-27e4d3264611.png alt="スクリーンショット 2021-12-02 18.02.03.png"></p><h3 id=ripgrep>ripgrep</h3><p>ripgrep は、デフォルトでハイライト出力します。行番号やファイル名には異なる色がつきます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/c48860a7-6b0c-259e-3d6f-b0fa67bfdaaf.png alt=image.png></p><h2 id=端末以外の出力>端末以外の出力</h2><p>これらのコマンドは、出力が端末でない場合には、色付き出力の機能を無効にします。パイプにも着色して出力するためには <code>--color=always</code> オプションを指定します。<code>--color</code> オプションの仕様は、どのコマンドもほぼ共通で、値として <code>never</code>, <code>auto</code>, <code>always</code> を取ります。ただ、grep はデフォルトが <code>never</code>、greple と ripgrep は <code>auto</code> という違いがあります。</p><h2 id=まとめ>まとめ</h2><p>単純な文字列を指定した検索について説明しました。もっとも、このような使い方であれば greple を使う必要はまったくないので別のツールを使った方がいいでしょう。実行速度に関しては、インタプリタ型の greple はかなり不利ですが、一般的な使い方であれば実用上問題になるようなことはありません。</p><h2 id=see-also>SEE ALSO</h2><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6e66e63e0e98d33b5933a5c3d6a6dcf7>3 - 複数キーワードによる検索</h1><h2 id=パターンオプション>パターンオプション</h2><p>greple には、パターンを指定するために以下のようなオプションがあります。オプション指定がない場合には、最初のコマンド引数がパターンとされ、これは <code>-le</code> オプションで指定されたのと同様に扱われます。</p><pre><code>     PATTERN
       pattern              'and +must -not ?alternative &amp;function'
       -x, --le   pattern   lexical expression (same as bare pattern)
       -e, --and  pattern   pattern match across line boundary
       -r, --must pattern   pattern cannot be compromised
       -v, --not  pattern   pattern not to be matched
           --or   pattern   alternative pattern group
           --re   pattern   regular expression
           --fe   pattern   fixed expression
</code></pre><h3 id=--le-オプションによる複数キーワード指定><code>--le</code> オプションによる複数キーワード指定</h3><p><code>--le</code> は lexical expression の略としていて greple の le もここから来ています。単なる文字列ではなくて、意味を持ったトークンの集まりというような意味合いですが、英語として通じるか実はちょっと不安です。とりあえず、ブラウザの検索欄と同じように考えてもらえばいいと思います。</p><p>検索エンジンの検索欄に空白で区切って複数の単語を並べると、そのすべての文字列にマッチするページを表示しようとしてくれます。greple の <code>--le</code> オプションも同様で、空白で区切られた検索トークンのすべてが含まれる行を表示します。</p><p>前回の寿司セットを例にとってみます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sushi.txt data-lang=sushi.txt><span style=display:flex><span>サービスセット      熟成まぐろ えび たまご いか サーモン いなり ねぎまぐろ サラダ
</span></span><span style=display:flex><span>お子様セット        熟成まぐろ えび たまご いなり ツナサラダ
</span></span><span style=display:flex><span>特上セット          中とろ 熟成まぐろ 熟成真鯛 はまち 赤えび ほたて うなぎ かに いくら
</span></span><span style=display:flex><span>特上極旨セット      中とろ はまち かに いくら 赤えび サーモン うなぎ うに
</span></span><span style=display:flex><span>うどんセット        熟成まぐろ サーモン たまご えび うどん
</span></span><span style=display:flex><span>サラダ軍艦セット    えびマヨ ツナサラダ サラダ シーフードサラダ
</span></span><span style=display:flex><span>人気セット          熟成まぐろ 漬けまぐろ サーモン びんちょう いか えび えびアボカド たまご
</span></span><span style=display:flex><span>まぐろづくしセット  中とろ 熟成まぐろ ねぎまぐろ
</span></span><span style=display:flex><span>プレミアムセット    中とろ まぐろ サーモン 赤えび はまち うなぎ かに いくら
</span></span></code></pre></div><p>前回は<strong>まぐろ</strong>が入っているセットを検索しましたが、やっぱり<strong>はまち</strong>も食べたいので、<strong>まぐろ</strong>と<strong>はまち</strong>が入っているセットを探します。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/ad06e218-f46b-9a13-b10f-6af4982ec99e.png alt=image.png></p><p>2つのセットがあることがわかります。</p><p><strong>ほたて</strong>も食べたいと探すと、<strong>特上セット</strong>一択になりました。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/153569c0-f869-5950-3f60-e133616639ae.png alt=image.png></p><p>このように、greple のパターンに空白で区切って複数のキーワードを指定すると、その全てを含む行を表示します。</p><h2 id=grep-の場合>grep の場合</h2><p>grep も <code>-e</code> オプションを繰り返し使用することで、複数のキーワードを指定することができます。同じように、<strong>まぐろ</strong>と<strong>はまち</strong>を探してみます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/d383062f-9095-4eab-05f2-2169820f6de3.png alt=image.png></p><p>grep の場合は、複数のパターンを指定すると、そのいずれかが含まれる行を表示します。</p><p>では、<strong>まぐろ</strong>と<strong>はまち</strong>の両方が入っているセットを検索するためにはどうするかというと、まず思いつくのはパイプでつなぐことです。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/f74a4749-5e64-365d-2c4e-1782c0b715d6.png alt=image.png></p><p>あるいは、<strong>まぐろ</strong>と<strong>はまち</strong>の両方が含まれるパターンを指定する方法もあります。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/b1fc5af5-9f1d-8293-826e-6a4a0215a238.png alt=image.png></p><p>しかし、これでは<strong>はまち</strong>の方が先に出てきた場合に対応することができません。どちらにも対応しようとするとこうなります。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/81bb2831-0643-d499-87fa-bc6caac187e4.png alt=image.png></p><p>この例では grep ではなく egrep を使っています。grep で同じ結果を得るためには <code>|</code> を <code>\|</code> に置き換えます。</p><p>見てわかるように、<strong>まぐろ</strong>と<strong>はまち</strong>以外の部分もマッチしてしまうので、その部分に色をつけるためには、最後にもう一度 egrep を通します。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/e73e46c0-6ac1-f2c1-7285-c0677e2b06b0.png alt=image.png></p><p>これで grep でも、greple と同じ出力を得ることができました。ただ、これ以上キーワードが増えていくとちょっと大変なので、やはりパイプを使った方がよさそうです。</p><h2 id=両方を含む行にマッチする正規表現>両方を含む行にマッチする正規表現</h2><p>順序に関係なく<strong>まぐろ</strong>と<strong>はまち</strong>の両方を含む行にマッチさせる正規表現を作ることも可能です。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/b5cff79a-ac4c-fc86-a481-6b6de637218c.png alt=image.png></p><p>正規表現の先読み (look-ahead) の機能を使って、<code>(?=.*まぐろ)</code> と <code>(?=.*はまち)</code> の両方の条件を満たす行頭 (<code>^</code>) を探しています。ripgrep 標準の正規表現は先読みをサポートしていないので <code>--pcre2</code> オプションを使っています。</p><p>幅のない行頭にしかマッチしていないので、<strong>まぐろ</strong>と<strong>はまち</strong>はカラー出力されません。この <code>^</code> はなくても同じ結果になりますが、正規表現エンジンの作りによっては非効率な動作になる可能性があるので、あった方がいいでしょう。</p><h2 id=マルチカラーハイライト>マルチカラーハイライト</h2><p>3種類の寿司ネタを探した例で、それぞれのネタが違う色で表示されていたことに気が付いたでしょうか。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/153569c0-f869-5950-3f60-e133616639ae.png alt=image.png></p><p>greple はこのように複数のキーワードが指定された場合、それぞれにマッチする部分を異なる色でハイライトして表示します。色に関するオプションについては、いずれ詳しく説明します。</p><h2 id=まとめ>まとめ</h2><p>greple で複数のキーワードを指定して、そのすべてが含まれる行を出力する方法について説明しました。</p><p>まとまった文章の執筆や校正をしていると、場所は覚えていないけど、どこかにあったはずの説明を参照したくなることがあります。「TCP の再送とタイムアウトについて、どこに書いてあったっけ」というような状況です。この例であれば &lsquo;<strong>TCP</strong> <strong>再送</strong> <strong>タイムアウト</strong>&rsquo; という3つのキーワードを含む部分を探せばいいわけです。</p><p>1行の中にすべてのキーワードが含まれているとは限らないじゃないか、と思われるでしょうか。その通りです。そのような場合についても、いずれ考えてみましょう。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-2fcfbe6d31252be26165254110ee5e99>4 - 複数キーワード検索 OR</h1><p>前回は、指定した複数のキーワードをすべて含む行を表示する方法について説明しました。今回は、A か B のどちらかが含まれればいいという条件を指定する方法について紹介します。</p><h2 id=--le-オプションの--指定><code>--le</code> オプションの <code>?</code> 指定</h2><p>前回と同じ寿司セットの検索を考えます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sushi.txt data-lang=sushi.txt><span style=display:flex><span>サービスセット      熟成まぐろ えび たまご いか サーモン いなり ねぎまぐろ サラダ
</span></span><span style=display:flex><span>お子様セット        熟成まぐろ えび たまご いなり ツナサラダ
</span></span><span style=display:flex><span>特上セット          中とろ 熟成まぐろ 熟成真鯛 はまち 赤えび ほたて うなぎ かに いくら
</span></span><span style=display:flex><span>特上極旨セット      中とろ はまち かに いくら 赤えび サーモン うなぎ うに
</span></span><span style=display:flex><span>うどんセット        熟成まぐろ サーモン たまご えび うどん
</span></span><span style=display:flex><span>サラダ軍艦セット    えびマヨ ツナサラダ サラダ シーフードサラダ
</span></span><span style=display:flex><span>人気セット          熟成まぐろ 漬けまぐろ サーモン びんちょう いか えび えびアボカド たまご
</span></span><span style=display:flex><span>まぐろづくしセット  中とろ 熟成まぐろ ねぎまぐろ
</span></span><span style=display:flex><span>プレミアムセット    中とろ まぐろ サーモン 赤えび はまち うなぎ かに いくら
</span></span></code></pre></div><p>前回は<strong>まぐろ</strong>と<strong>はまち</strong>の両方を含むセットを探しましたが、<strong>はまち</strong>が入っているセットは少ないので選択肢が限られます。妥協して、代わりに<strong>えび</strong>でもいいことにしましょう。</p><p>このような場合は、次のようにキーワードの先頭に <code>?</code> マークを指定します。</p><pre tabindex=0><code>greple -n &#39;まぐろ ?はまち ?えび&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/8f8ea7ce-3418-c0bf-d1bf-e87a2db26202.png alt=image.png></p><p>だいぶ選択肢が増えました。</p><h2 id=複数の---le-オプションを使う>複数の <code>--le</code> オプションを使う</h2><p>選択肢が増えて気が大きくなってきたので、上の条件に加えて、<strong>うに</strong>か<strong>いくら</strong>も食べたくなりました。</p><pre tabindex=0><code>greple -n &#39;まぐろ ?はまち ?えび ?うに ?いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/930f4aae-e3d1-1f29-83e8-c9c7c27a5c7c.png alt=image.png></p><p>こうすると、はまち、えび、うに、いくら、のどれかが入っていればいいということになってしまって、期待した結果が得られません。</p><p>このような場合は <code>--le</code> を複数回指定します。</p><pre tabindex=0><code>greple -n --le &#39;まぐろ ?はまち ?えび&#39; --le &#39;?うに ?いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/13f137fe-7683-0e82-cd0d-d431e2337bd7.png alt=image.png></p><p>OR キーワードは、それぞれの <code>--le</code> オプション内でグループ化され、オプション同士は AND で評価されるため、全体としては次のような意味になります。</p><pre tabindex=0><code>まぐろ AND (はまち OR えび) AND (うに OR いくら)
</code></pre><p>結果は、それぞれの検索条件毎に色分けされて、見やすく表示されています。</p><p>上の例で、最初の <code>--le</code> を省略することはできません。greple は、パターンオプションが指定されていない時のみ、最初の引数をパターンと解釈するので、この <code>--le</code> を省略すると次の引数はファイル名として扱われてしまいます。</p><h2 id=正規表現を使う>正規表現を使う</h2><p>上の例は、正規表現の <code>|</code> 記法を使って次のように書いても、まったく同じ意味になります。実は <code>?</code> 記号がついたキーワードについては、内部的にこのような表現に変換して評価しています。</p><pre tabindex=0><code>greple -n --le &#39;まぐろ はまち|えび&#39; --le &#39;うに|いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/da95128e-5670-d712-f85a-47b56356a2d1.png alt=image.png></p><p>さらには、この例では <code>?</code> を使っていないので <code>--le</code> オプションは1つにまとめてしまっても問題ないし、その場合は省略することもできます。</p><pre tabindex=0><code>greple -n &#39;まぐろ はまち|えび うに|いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/965b2923-108c-503c-6605-970f23833d2e.png alt=image.png></p><p>慣れている人には、この方がわかりやすいかもしれません。</p><h2 id=まとめ>まとめ</h2><p><code>--le</code> オプションに複数キーワードを指定する際に、OR 条件を指定する方法を紹介しました。</p><p>grep を使って同じことをやろうとすれば、やはりパイプを使うことになると思います。</p><pre tabindex=0><code>grep -n まぐろ sushi.txt | egrep &#39;はまち|えび&#39; | egrep &#39;うに|いくら
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/36fa36b7-05bd-54ba-857e-00d390dc07b2.png alt=image.png></p><p>このくらいになってくると、少し greple を使うメリットが感じられてくるでしょうか。条件が複雑になってくると、条件毎に色分けしてくれるのがありがたく感じられる局面も増えてきます。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c0e9f643f94cf8ef0f727030f187929a>5 - 複数キーワード検索 NOT</h1><p>これまでに、複数キーワードを使った AND と OR の組み合わせを紹介しました。AND、OR　とくれば、当然次は NOT です。</p><h2 id=実行例>実行例</h2><p>また寿司セットを使って考えてみます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sushi.txt data-lang=sushi.txt><span style=display:flex><span>サービスセット      熟成まぐろ えび たまご いか サーモン いなり ねぎまぐろ サラダ
</span></span><span style=display:flex><span>お子様セット        熟成まぐろ えび たまご いなり ツナサラダ
</span></span><span style=display:flex><span>特上セット          中とろ 熟成まぐろ 熟成真鯛 はまち 赤えび ほたて うなぎ かに いくら
</span></span><span style=display:flex><span>特上極旨セット      中とろ はまち かに いくら 赤えび サーモン うなぎ うに
</span></span><span style=display:flex><span>うどんセット        熟成まぐろ サーモン たまご えび うどん
</span></span><span style=display:flex><span>サラダ軍艦セット    えびマヨ ツナサラダ サラダ シーフードサラダ
</span></span><span style=display:flex><span>人気セット          熟成まぐろ 漬けまぐろ サーモン びんちょう いか えび えびアボカド たまご
</span></span><span style=display:flex><span>まぐろづくしセット  中とろ 熟成まぐろ ねぎまぐろ
</span></span><span style=display:flex><span>プレミアムセット    中とろ まぐろ サーモン 赤えび はまち うなぎ かに いくら
</span></span></code></pre></div><p><strong>まぐろ</strong>は必ず食べたくて、<strong>はまち</strong>か<strong>えび</strong>のどちらかが入ったセットは、次のようにして探すことができました。</p><pre tabindex=0><code>greple -n &#39;まぐろ はまち|えび&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/8f8ea7ce-3418-c0bf-d1bf-e87a2db26202.png alt=image.png></p><p>でも、実は<strong>いくら</strong>はアレルギーで食べられないことを思い出しました。</p><pre tabindex=0><code>greple -n &#39;まぐろ はまち|えび いくら&#39; sushi.txt
</code></pre><p>とすれば、候補の中から<strong>いくら</strong>を含む食べられないセットを表示することができます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/0d8e93bb-6c50-02cd-551d-6745e96c6d40.png alt=image.png></p><p>でも、本当に探したいのは<strong>いくらを含まない</strong>セットです。そのような場合には、やはり検索エンジンと同じように、キーワードの先頭にマイナス記号 <code>-</code> を付けます。</p><pre tabindex=0><code>greple -n &#39;まぐろ はまち|えび -いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/0fc07065-b9c7-25ea-feb9-250b6f232e1e.png alt=image.png></p><p>これで、望みの結果を得ることができました。</p><h2 id=grep--v-との違い>grep -v との違い</h2><p>grep の <code>-v</code> オプションは、全体から指定したパターンを含まない行を選び出すためのものです。それに対して、greple の NOT キーワードは、他のキーワードによって選ばれた選択肢から、指定したパターンを含むものを削除するためのものです。ですから NOT キーワードだけのパターンはエラーになります。</p><p>grep と同様に動作して欲しければ、どの行にも必ずマッチするパターン、たとえば行頭にマッチする <code>^</code> を指定することで実現は可能です。ただ、そのために greple を使う必要性は、あまり感じられません。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/77853d57-05b9-347f-59b4-773b8c2aaa70.png alt=image.png></p><h2 id=まとめ>まとめ</h2><p>今回は、複数キーワードを使った検索について AND と OR に続いて NOT の使い方を紹介しました。使い方は簡単で、検索エンジンと同じように、除外したいパターンの先頭に <code>-</code> を付けるだけです。</p><p>寿司セットの例は、数が少ないので<strong>目grep</strong>でも望む情報は得られますが、もし数千行の情報から選び出すとすれば、ツールの力を借りた方が得策です。AND、OR、NOT を組み合わせて情報を絞り込んでいくことで、望みの結果に近づくことができます。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-56e69f334e30488749b06714811e3936>6 - 複数キーワード検索 MUST</h1><p>これまでに、複数キーワードを使った検索について AND、OR、NOT と紹介してきました。</p><p>今回は、ちょっと変わった MUST について紹介します。</p><h2 id=注目したいキーワード>注目したいキーワード</h2><p>前回は、以下のような寿司セットの中から、<strong>まぐろ</strong>と<strong>はまち</strong>か<strong>えび</strong>を含んでいて、<strong>いくら</strong>が入っていないものを探すという例を考えました。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sushi.txt data-lang=sushi.txt><span style=display:flex><span>サービスセット      熟成まぐろ えび たまご いか サーモン いなり ねぎまぐろ サラダ
</span></span><span style=display:flex><span>お子様セット        熟成まぐろ えび たまご いなり ツナサラダ
</span></span><span style=display:flex><span>特上セット          中とろ 熟成まぐろ 熟成真鯛 はまち 赤えび ほたて うなぎ かに いくら
</span></span><span style=display:flex><span>特上極旨セット      中とろ はまち かに いくら 赤えび サーモン うなぎ うに
</span></span><span style=display:flex><span>うどんセット        熟成まぐろ サーモン たまご えび うどん
</span></span><span style=display:flex><span>サラダ軍艦セット    えびマヨ ツナサラダ サラダ シーフードサラダ
</span></span><span style=display:flex><span>人気セット          熟成まぐろ 漬けまぐろ サーモン びんちょう いか えび えびアボカド たまご
</span></span><span style=display:flex><span>まぐろづくしセット  中とろ 熟成まぐろ ねぎまぐろ
</span></span><span style=display:flex><span>プレミアムセット    中とろ まぐろ サーモン 赤えび はまち うなぎ かに いくら
</span></span></code></pre></div><p>そして、条件を満たすものは、次のようにして得られました。</p><pre tabindex=0><code>greple -n &#39;まぐろ はまち|えび -いくら&#39; sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/0fc07065-b9c7-25ea-feb9-250b6f232e1e.png alt=image.png></p><p>しかし、どのセットに<strong>いくら</strong>が入っていたかにも興味がないでしょうか。<strong>いくら</strong>以外はいい内容だったら、誰かと交換してもいいかもしれません。もちろん <code>-いくら</code> の指定を外せばいいのですが、そうするとどこに<strong>いくら</strong>があるのかを自分の目で探さなければなりません。</p><p>このように「なければならない」「あってはいけない」だけではなく、「注目したい」ワードを指定したいことがあります。このような時に使えるのが MUST キーワードです。</p><h2 id=-による-must-指定><code>+</code> による MUST 指定</h2><p>これもまた検索エンジンと同様に、キーワードの先頭にプラス記号 <code>+</code> を付けることで実現します。実際、検索エンジンに複数のキーワードを与えた時に、すべてのキーワードが含まれてはいない結果が表示されることがあります。その時に、絶対にあってほしいキーワードに対して <code>+</code> をつけて検索します。</p><p>先の例であれば、このように使います。</p><pre tabindex=0><code>greple -n &#39;+まぐろ +はまち|えび いくら&#39; sushi.txt
</code></pre><p>MUST キーワードがあると、記号なしのキーワードはオプショナルに格下げされます。つまり、<strong>いくら</strong>はあってもなくても構わないが、あれば色付きで表示されます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/5f0956f0-0fd6-6136-9b10-e7b418ae44c5.png alt=image.png></p><p>これも、ハイライトカラーが複数あることの効果が感じられる例です。試しに、単色での表示にしてみると、こんな風になります。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/73a2f209-559c-5578-2af2-39f7fdaab239.png alt=image.png></p><h2 id=まとめ>まとめ</h2><p>今回は MUST キーワードについて説明しましたが、それによって新たに導入されるのは「オプショナルキーワード」であると言うこともできます。</p><p>最後に、以前の記事で紹介した実際の使用例を載せておきます。これは compromise という単語がどういう日本語に翻訳されているかを調べた時のものです。compromise のみを必須として、候補となる訳語を着色して表示しています。いずれ、詳しく説明できるかもしれません。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/9813b14d-aed6-381b-aead-49593ee36f55.png alt=image.png></p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-8e8231b205c27a4c40af51c00c4861e8>7 - 複数キーワード検索 単独オプション</h1><p>これまで <code>--le</code> オプションを使って、複数のキーワードを指定する方法について紹介してきました。キーワードの前に記号を付けることで AND, OR, NOT, MUST の意味を持たせることができました。</p><h2 id=単独オプション>単独オプション</h2><p>実は <code>--le</code> オプションで扱うそれぞれのキーワードは、個別の単独オプションで指定することもできます。一覧にすると、こうです。</p><table><thead><tr><th style=text-align:center>記号</th><th style=text-align:center>意味</th><th style=text-align:center>単独オプション</th></tr></thead><tbody><tr><td style=text-align:center>なし</td><td style=text-align:center>AND or OPTIONAL</td><td style=text-align:center>-e, &ndash;and</td></tr><tr><td style=text-align:center>-</td><td style=text-align:center>NOT</td><td style=text-align:center>-v, &ndash;not</td></tr><tr><td style=text-align:center>?</td><td style=text-align:center>OR</td><td style=text-align:center>&ndash;or</td></tr><tr><td style=text-align:center>+</td><td style=text-align:center>MUST</td><td style=text-align:center>-r, &ndash;must</td></tr></tbody></table><p>このため、以下のコマンドは、どれも同じ意味になります。</p><pre tabindex=0><code>greple &#39;まぐろ ?はまち ?えび -いくら&#39; sushi.txt
greple &#39;まぐろ はまち|えび -いくら&#39; sushi.txt
greple -e まぐろ --or はまち --or えび -v いくら sushi.txt
greple -e まぐろ -e &#39;はまち|えび&#39; -v いくら sushi.txt
</code></pre><p>機能的に違いはないので、どれでも使いやすい方法で指定すればいいと思います。<code>--or</code> オプションに関しては、単独オプションで指定したものがグループ化されます。</p><h2 id=絞り込み検索>絞り込み検索</h2><p>単独オプションが便利なのは、次々にオプションを追加して、選択肢を絞り込んでいくような場合です。シェルのヒストリー機能を使って直前のコマンドを呼び出して、そのまま最後に追加していくことができます。</p><p>特に <code>-v</code> オプションは検索ワードを指定するオプションとしては解釈されないので、裸の（オプション指定なしの）検索ワードがあっても、最後に追加するだけで検索結果を絞り込むことが可能です。オプション引数とそれ以外の引数は、このように混在させることができます。</p><pre tabindex=0><code>greple -n まぐろ sushi.txt
greple -n まぐろ sushi.txt -v いくら
greple -n まぐろ sushi.txt -v いくら -v いか
greple -n まぐろ sushi.txt -v いくら -v いか -v サーモン
</code></pre><p>実行してみるとこのような結果になります。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/b2efc8ec-8a80-7d09-5951-be7df0478eff.png alt=image.png></p><p>ちょうど、パイプで <code>grep -v</code> コマンドをつないでいくのと同じ要領で絞り込んでいくことができます。</p><p>毎回<strong>まぐろ</strong>の色が変わってしまっているのは実装上の都合です。この結果を見て、修正した方がいいのではないかと感じていますが、この場合むしろ見やすくなっていいですね。そのうち直します。</p><p><code>-v</code> オプションにも正規表現を使えるので、最後のコマンドは次のように書いても同じです。</p><pre tabindex=0><code>greple -n まぐろ sushi.txt -v &#39;いくら|うに|たまご&#39;
</code></pre><h2 id=まとめ>まとめ</h2><p>複数キーワードの AND, OR, NOT, MUST 指定を単独のオプションで行う方法について紹介しました。<code>--le</code> オプションとどちらが適しているかは、好みや状況によって変わってくると思います。</p><p>grep 系のコマンドを使う状況では、最初に出た結果が多すぎて、どうやって絞り込んでいくか試行錯誤するようなことがよくあります。この場合、上で紹介した <code>-v</code> オプションの使い方は有効です。</p><p>オプションを最後にまとめて、こんな風に使うやり方もいいかもしれません。この場合は、パターンが最初の引数ではないのでオプション指定が必要ですが、<code>--le</code> の代わりに <code>-x</code> を使うこともできます。</p><pre tabindex=0><code>greple sushi.txt -x &#39;まぐろ -いくら -いか -サーモン&#39;
</code></pre><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-34b4e734da2c7382d5b9aac2f1da2e45>8 - 検索範囲指定 --inside/--outside</h1><p>これは<a href=https://qiita.com/advent-calendar/2021/greple>grepleチュートリアル</a>の8日目です。これまでに、複数キーワードを使って、様々なロジックで対象データから文字列を検索する方法を紹介しました。今回は、検索する対象の範囲を指定する方法について紹介します。</p><h2 id=検索する場所を選びたい>検索する場所を選びたい</h2><p>今まで、寿司セットから好みのネタを探す方法について考えてきました。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/4ce529c9-9cb2-3d10-3b20-57e0315a8987.png alt=image.png></p><p>しかし、一点どうも気に入らない部分があります。おわかりでしょうか。寿司ネタを検索しているのに、「まぐろづくしセット」というセット名がマッチしてしまっている点です。</p><p>それくらい別にいいじゃないかというかもしれませんが、<strong>まぐろづくし</strong>だからいいものの、これがもし<strong>まぐろ嫌いセット</strong>だったらどうでしょうか。まぐろ好きは激おこです。</p><p>このように、検索対象データの内容は一様ではないのに、一般の検索コマンドはそれを無視して全体を検索対象にしてしまいます。解決するためにはデータベースを使うとか、専用の検索コマンドを用意するなどの必要があります。</p><h2 id=greple-による検索範囲指定>greple による検索範囲指定</h2><p>greple には、検索範囲を指定する機能があります。まず、寿司セット名範囲を表すパターンを考えてみましょう。セット名部分は <code>^\S+</code> という正規表現でマッチすることができます。行頭から始まる空白以外の文字の連続という意味です。まずは、そのパターンを検索してみます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/a7bed838-89c5-0e2f-fdba-ff712973cbd6.png alt=image.png></p><p>うまく動いているようです。次に、この部分を <code>--inside</code> オプションとして指定して、<strong>まぐろ</strong>を検索します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --inside <span style=color:#4e9a06>&#39;^\S+&#39;</span> まぐろ sushi.txt
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/3b712043-de61-604d-a28b-b9c9b89b32a7.png alt=image.png></p><p>意図した通りに、セット名に含まれる<strong>まぐろ</strong>だけが検索されました。</p><p>でも、求めているのは<strong>セット名に含まれないまぐろ</strong>です。ですから、今度は <code>--inside</code>　ではなくて <code>--outside</code> オプションとして指定します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple -n --outside <span style=color:#4e9a06>&#39;^\S+&#39;</span> まぐろ sushi.txt
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/7cd85a9d-a6c6-6846-db6a-1c071454e811.png alt=image.png></p><p>これで、セット名以外の範囲にある<strong>まぐろ</strong>だけがハイライトされるようになりました。もちろん、セット名以外の部分に<strong>まぐろ</strong>が含まれなければ、その行は表示されません。</p><h2 id=繰り返し指定>繰り返し指定</h2><p><code>--inside</code> と <code>--outside</code> は、繰り返し指定することができます。その場合、それぞれの範囲の和集合が検索対象範囲となります。</p><p><code>--inside</code> と <code>--outside</code> で同じ範囲を指定するとどうなるかというと、ある領域とその補集合の和になるので、当然全体になります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --inside <span style=color:#4e9a06>&#39;^\S+&#39;</span> --outside <span style=color:#4e9a06>&#39;^\S+&#39;</span> まぐろ sushi.txt
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/0c5f7d2e-4f73-0227-a406-aa32f828e433.png alt=image.png></p><p>このように、何も指定しないのと同じ部分がマッチしていますが、寿司セット名とそれ以外の部分で色が変わっています。greple は、複数の検索範囲が指定され、検索ワードが1つしかなかった場合、検索範囲毎にハイライトカラーを変えて表示します。</p><h2 id=まとめ>まとめ</h2><p><code>--inside</code> と <code>--outside</code> オプションにパターンを指定することで、指定した領域の内側、あるいは外側だけに検索対象を限定する方法について紹介しました。</p><p>指定するパターンは、いくらでも複雑化することができます。たとえば、次のようにすれば、C のソースコードのコメント部分のみを対象にして検索することができます。<code>/*</code> で始まって <code>*/</code> で終わる最小範囲を指定しています。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --inside <span style=color:#4e9a06>&#39;(?s)/\*.*?\*/&#39;</span> pattern ...
</span></span></code></pre></div><p>次の例は、メールの Subject 行と本文のみを対象にして検索しています。今回のチュートリアルの中では正規表現そのものについて詳しく説明はしません。ちょっとトリッキーな表現になっているので、どうして動作するのか考えてみてください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --inside <span style=color:#4e9a06>&#39;\A(.+\n)*\KSubject:.+&#39;</span> --outside <span style=color:#4e9a06>&#39;\A(?s:.*?)\n\n&#39;</span>
</span></span></code></pre></div><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-23de3058028259a4afd6f266d429a7cd>9 - 検索範囲指定 --include/--exclude</h1><p>これは<a href=https://qiita.com/advent-calendar/2021/greple>grepleチュートリアル</a>の9日目です。<a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>前回</a>は <code>--inside</code> と <code>--outside</code> オプションを使って、検索する対象の範囲を指定する方法について紹介しました。今回は、その続きで <code>--include</code> と <code>--exclude</code> オプションについて紹介します。</p><h2 id=例外条件を指定したい>例外条件を指定したい</h2><p><code>--inside</code> と <code>--outside</code> は、全体の中から、どこを検索対象にするかという観点で使いました。それに対して <code>--include</code> と <code>--exclude</code> は、どこを検索対象から外すかという観点で使います。</p><p><code>--outside</code> オプションを使って、寿司ネタ領域から<strong>まぐろ</strong>を検索しています。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/7cd85a9d-a6c6-6846-db6a-1c071454e811.png alt=image.png></p><p>でも、まぐろは好物だけど、ヅケはあまり好きではなくて、ネギも勘弁して欲しいなあということで、<strong>漬けまぐろ</strong>と<strong>ねぎまぐろ</strong>を除外したいと思いました。</p><p>この場合 <code>--exclude</code> オプションに除外したい文字列を与えることで、それに対するマッチを抑制することができます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple -n --outside <span style=color:#4e9a06>&#39;^\S+&#39;</span> まぐろ sushi.txt --exclude 漬けまぐろ --exclude ねぎまぐろ
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/05c5d572-68dd-8bbb-cfdf-419c32404f14.png alt=image.png></p><p>ヅケとネギはハイライトされなくなりました。でも、選択肢は変わりませんでした。</p><p>文字列には正規表現を使用することができるので <code>--exclude '(漬け|ねぎ)まぐろ'</code> と書くこともできます。加えて、お子様セットも年齢制限があるので除外しましょう。この場合は単なる文字列ではなく、「お子様セット」ではじまる行全体を指定したいので <code>^お子様セット.*</code> と指定します。</p><p><code>sh greple -n --outside '^\S+' まぐろ sushi.txt --exclude '(漬け|ねぎ)まぐろ' --exclude '^お子様セット.*'</code>
<img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/ae1d7430-d2f9-2562-3d29-5cf2be99fb07.png alt=image.png></p><p>お子様セットは候補に出てこなくなりました。</p><h2 id=--inside--outside-と---include--exclude-の使い分け>&ndash;inside/&ndash;outside と &ndash;include/&ndash;exclude の使い分け</h2><p>流れとしては <code>--inside/--outside</code> で検索対象範囲を拾い出して、<code>--include/--exclude</code> で絞り込むという使い方になります。</p><p>上の例で、<code>--exclude</code> の代わりに <code>--outside</code> を使うことはできません。前回書いたように <code>--inside</code> と <code>--outside</code> で指定した範囲は和集合として扱われるので、結果として全体に戻ってしまいます。</p><p>この例では、<code>--outside</code> を一度しか使っていないので、そこを <code>--exclude</code> にしても結果は変わりません。単独で使う場合は、どちらを使っても同じ結果になります。</p><h2 id=まとめ>まとめ</h2><p>前回の <code>--inside/outside</code> に加えて <code>--include/exclude</code> オプションについて紹介しました。</p><p>TeX や roff など、マークアップを使った文書ファイルを校正しようとする場合、マークアップ命令やコメント部分は対象から外して、純粋に文章の部分だけを処理する必要があります。</p><p>また、原稿の中には自分で書いた文章以外に、引用文であったり、別の文書や書籍のタイトル、固有名詞など、ローカルなルールを適用すべきではない部分もあります。それらを例外として処理対象から外すことができないと実用的なツールとはなりません。greple の機能は、そのような経験から進化してきました。</p><p>greple のオプションは、なるべく grep に合わせるようにしているのですが、<code>--include</code> と <code>--excude</code> については、まったく違う意味になるので注意してください。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-47694884aad84257ac9484005ff539d8>10 - 検索ブロック指定</h1><p>一般的に、grep 系のツールが検索の対象とするのは「行」です。しかし、扱いたい情報の単位は行とは限りません。greple は、検索対象とするデータの単位を柔軟に指定することができます。</p><h2 id=--all>&ndash;all</h2><p><code>--all</code> は、ファイル全体を検索単位とするオプションです。</p><p>このオプションが有効なのは、当たり前ですが、ファイルの内容を全部見たい場合です。</p><p>寿司セットの中には魚介類以外のネタとして「サラダ」「アボカド」「うどん」があって、すべてを AND で指定すると、そのすべてを含むセットはありませんが <code>--all</code> を指定すれば全体を眺めることができます。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/33ceac6e-bed0-5bbc-2104-2a334af6292f.png alt=image.png></p><p>対象が原稿であれば、注目する部分をハイライトして、全体を眺めたいような場合に有効です。</p><p>ファイル名のみを表示する <code>-l</code> オプションと組み合わせて使用すると、指定したワードをすべて含むファイルを探すことができます。検索エンジンと同じような使い方です。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/5d178d48-e17c-d0fc-148c-c763633a238d.png alt=image.png></p><h2 id=-p---paragraph>-p, &ndash;paragraph</h2><p><code>-p</code> (<code>--paragraph</code>) オプションを指定すると、行ではなく、空白行で区切られた<strong>パラグラフ</strong>を単位として検索を行います。複数キーワードの処理も、行ではなくパラグラフ単位で行われるので、指定したワードは同一行に含まれる必要はありません。</p><p>次の例では AND, OR, NOT, MUST という単語がすべて含まれるパラグラフを検索しています。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/695f4be3-46e8-fd62-8a1b-1f8b0001b652.png alt=image.png></p><p>デフォルトでは、ファイル名は grep と同様にすべての行に表示されますが、<code>--filestyle=once</code> というオプションを指定することで、最初に一度だけ表示しています。</p><h2 id=--block>&ndash;block</h2><p><code>--block</code> オプションでパターンを指定すると、それにマッチする部分が検索単位となります。次の例では git のソースコードから、Cのコメント部分 (<code>/*...*/</code>) をブロックとして指定して UTF, Unicode, BOM という単語がすべて含まれるブロックを検索しています。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --border <span style=color:#4e9a06>&#39;(?s)/\*.*?\*/&#39;</span> --fs<span style=color:#ce5c00;font-weight:700>=</span>once -i <span style=color:#4e9a06>&#39;utf unicode bom&#39;</span> *.h
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/074099d0-ba34-246f-88c3-a5567815a19b.png alt=image.png></p><p>この場合、検索対象のブロックは連続していません。ブロックに相当しない場所でのマッチは無視されます。</p><h2 id=--border>&ndash;border</h2><p><code>--border</code> オプションには <code>--block</code> と同じようにパターンを指定して、それを元にブロックを作りますが、<code>--block</code> と違い、マッチの始点と終点を境界とする連続したブロックを作ります。</p><p>デフォルトの行単位での挙動は <code>--border=^</code> を指定したのと同じで、パラグラフモードは連続する改行文字 <code>--border='\n\n+'</code> を指定したのと同じです<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>。</p><p>次の例は、シャープ (#) で始まる行の行頭にブロック境界を設定します。つまり、# ではじまる行から次の行頭の # までの、マークダウン形式のパラグラフがブロックとなります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple --border <span style=color:#4e9a06>&#39;^(?=#)&#39;</span> PCRE *.md --fs<span style=color:#ce5c00;font-weight:700>=</span>once
</span></span></code></pre></div><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/da3374d7-399e-2fb7-0bd0-d55f4f7603e4.png alt=image.png></p><h2 id=-a--b--c>-A, -B, -C</h2><p>-A (after), -B (before), -C (context) オプションは、検索行の前後を同時に表示するためのもので、grep とほぼ同様に使うことができます。次の例は、マッチした前後1行ずつを表示しています。</p><pre tabindex=0><code>greple -n -e びんちょう sushi.txt -C1
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/c5a2df53-3674-8e6b-a030-f66ad6533ef5.png alt=image.png></p><p>この前後コンテキストも、指定したブロックに対して適用されます。ですから、パラグラフモードであれば、前後のパラグラフを一緒に表示します<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/c843918d-25a1-4b5f-42c4-bffd87e791bf.png alt=image.png></p><p>この時、検索ロジックもコンテキスト同様に拡張されます。次の例で、最初のコマンドでは<strong>びんちょう</strong>と<strong>サラダ</strong>を両方含むセットは見つかりませんが、次のコマンドは <code>-C1</code> でコンテキストを前後に1行ずつ拡張することで、条件を満たすデータが発見されます。</p><pre tabindex=0><code>greple -n -e びんちょう -e サラダ sushi.txt
greple -n -e びんちょう -e サラダ sushi.txt -C1
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/7490bdf4-ad6c-b89f-a10d-f663434040b4.png alt=image.png></p><h2 id=まとめ>まとめ</h2><p>greple の検索単位を指定するブロック機能について紹介しました。テキストファイルであっても、行単位で情報が管理されていることはむしろ稀です。処理対象の情報単位を柔軟に設定することで、論理的に意味のあるデータブロックに対して検索等の操作をすることが可能になります。</p><p>今回紹介した単純なパターンマッチによる方法では処理できないような複雑なデータ形式もあります。そのような場合には、また別のアプローチがあります。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d</a></li><li><a href=https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64>https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>簡略化して書いています。実際に使っているパターンは <code>(?:\A|\R)\K\R+</code> というものです。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><code>-C</code> オプションのデフォルトは2です。<code>-p</code> オプションを使った場合、空白行の部分も1パラグラフを構成します。したがって、このように前後1パラグラフずつを表示しているように見えます。&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2af880627899c600811e0040ed353fb9>11 - 拡張モジュールの使用法</h1><p>greple の特徴の一つは、モジュールによって拡張可能なことです。今回は、モジュールの使い方について紹介します。</p><h2 id=利用可能なモジュールを表示する>利用可能なモジュールを表示する</h2><p>モジュールは <code>-M</code> オプションで指定します。単独で使用すると、利用できるモジュールを表示します。この中には、greple に標準で含まれるものと、別パッケージからインストールしたもの、プライベートに作成したものが含まれます。</p><pre tabindex=0><code>$ greple -M
Use -M option at the beginning with module name.
Available modules:
	dig
	find
	line
	perl
	pgp
	select
	subst
	autocolor
	i18n
	termcolor
</code></pre><p>greple の拡張モジュールは、<code>App::Greple</code> の下にある小文字ではじまる Perl モジュールです。大文字ではじまるものは greple そのものを実装するためのものです。</p><p>greple の拡張モジュール機能は <code>Getopt::EX</code> モジュールで実現されており、<code>App::Greple</code> に加えて <code>Getopt::EX</code> の下にある汎用のモジュールを使うこともできます。<code>i18n</code>, <code>termcolor</code> などは <code>Getopt::EX</code> のモジュールです。</p><h2 id=モジュールを呼び出す>モジュールを呼び出す</h2><p><code>-M</code> オプションにモジュール名を指定することで、そのモジュールを呼び出すことができます。次の例は <code>App::Greple::find</code> モジュールを使うことを指示していますが、greple の拡張モジュールとして使用する場合には、単に <code>-Mfind</code> と指示します。</p><pre tabindex=0><code>greple -Mfind
</code></pre><h2 id=マニュアルを表示する>マニュアルを表示する</h2><p>モジュールオプションに続いて <code>--help</code> オプションを指定することで、そのモジュールのマニュアルを表示することができます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ greple -Mfind --man
</span></span></code></pre></div><pre tabindex=0><code>NAME
    find - Greple module to use find command

SYNOPSIS
    greple -Mfind find-options -- greple-options ...

DESCRIPTION
    Provide find command option with ending &#39;--&#39;.

    Greple will invoke find command with provided options and read its output
    from STDIN, with option --readlist. So

        greple -Mfind . -type f -- pattern

    is equivalent to:

        find . -type f | greple --readlist pattern

    If the first argument start with `!&#39;, it is taken as a command name and
    executed in place of find. You can search git managed files like this:

        greple -Mfind !git ls-files -- pattern
</code></pre><p>ただ、実装上の都合で、別のモジュールのマニュアルが表示されてしまうことがあります。その場合は、<code>man</code> コマンドや <code>perldoc</code> で <code>App::Greple</code> に続いてモジュール名を指定します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>man App::Greple::find
</span></span><span style=display:flex><span>perldoc App::Greple::find
</span></span></code></pre></div><p>ちなみに、<code>--man</code> の代わりに <code>--show</code> を使うと、モジュールの内容を見ることができます。<code>perldoc -m</code> としても同じです。</p><h2 id=モジュールを使う>モジュールを使う</h2><p>モジュールの使い方について <code>find</code> と <code>dig</code> モジュールを例に説明します。</p><p>greple には <code>grep -r</code> のようにディレクトリの下を再起的に検索するオプションはありません。その代わりに <code>--readist</code> というオプションがあって、標準入力から読んだファイル名を検索対象とします。find コマンドの出力を <code>--readlist</code> オプションで読み込めば再起的な検索が可能です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>find . -type f <span style=color:#000;font-weight:700>|</span> greple --readlist Copyright
</span></span></code></pre></div><p><code>find</code> モジュールを使うと、greple コマンドのオプションとして find オプションを指定することができるようになります。<code>-Mfind</code> から <code>--</code> までの間の引数を <code>find</code> コマンドのオプションとして処理します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple -Mfind . -type f -- Copyright
</span></span></code></pre></div><p>find コマンドのオプションは非常に詳細な指定が可能ですが、使いこなすのにはちょっとコツが必要です。たとえば .git ディレクトリを検索対象から外すためには次のように指定します。あまり直感的ではなくて、<code>-prune</code> オプションの使い方はいつもわからなくなります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>find . -name .git -prune -o -type f
</span></span></code></pre></div><p>git だけではなく様々なケースに対応しようとすると、オプションはさらに複雑化してきます。<code>dig</code> モジュールは <code>find</code> モジュールの面倒なオプションを自動的に設定して、必要のないリポジトリや画像ファイルなどをスキップするためのモジュールです。次のように使うことができます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple -Mdig Copyright --dig .
</span></span></code></pre></div><p>このコマンドは、実際には次のようなオプションに展開されて実行されます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>greple -Mfind .
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>(</span> <span style=color:#ce5c00;font-weight:700>(</span> <span style=color:#ce5c00;font-weight:700>(</span> -name .git -o -name .svn -o -name RCS -o -name CVS <span style=color:#ce5c00;font-weight:700>)</span> -o <span style=color:#ce5c00;font-weight:700>(</span> -name .vscode <span style=color:#ce5c00;font-weight:700>)</span> -o <span style=color:#ce5c00;font-weight:700>(</span> -name .build -o -name _build <span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>)</span> -prune -o -type f <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>! -name .* ! -name *,v ! <span style=color:#ce5c00;font-weight:700>(</span> -name *~ -o -name *.swp <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>! <span style=color:#ce5c00;font-weight:700>(</span> -iname *.jpg -o -iname *.jpeg -o -iname *.gif -o -iname *.png -o -iname *.ico -o -iname *.heic -o -iname *.heif -o -iname *.svg <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>! <span style=color:#ce5c00;font-weight:700>(</span> -iname *.tar -o -iname *.tar.gz -o -iname *.tbz -o -iname *.tgz -o -name *.a -o -name *.zip <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>! -iname *.pdf ! <span style=color:#ce5c00;font-weight:700>(</span> -name *.db -o -iname *.bdb <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>! <span style=color:#ce5c00;font-weight:700>(</span> -name *.bundle -o -name *.dylib -o -name *.o -o -name *.fits <span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>-print --
</span></span></code></pre></div><p>これを手で入力することを考えると気が遠くなりそうです。</p><p><code>dig</code> モジュールには <code>--git</code> というオプションも定義されていて、<code>git ls-files</code> の結果に対して検索をかけることができます。</p><h2 id=まとめ>まとめ</h2><p>今回は greple のモジュール機能について、その使い方を紹介しました。greple には、これまで紹介していないオプションが数多くありますが、モジュールを使うことで、複雑なオプション指定を組み合わせてシンプルなインタフェースを提供することが可能になります。モジュールの作り方については、機会を改めて説明します。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d</a></li><li><a href=https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64>https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64</a></li><li><a href=https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c>https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-07ed18d49b10c15084cada1e4a38e2e7>12 - 初期設定ファイル .greplerc</h1><p>greple は、UNIX の他の多くのコマンドと同様に、ホームページに初期設定ファイル (~/.greplerc) を用意することで、起動時にそれを読み込むことができます。この中では、様々な設定が可能です。</p><h2 id=default-デフォルトオプション>default: デフォルトオプション</h2><p><code>option</code> 命令で新しいオプションを定義することができます。中でも <code>default</code> という名前は特別で、実行時に自動的に付与するオプションを指定することができます。たとえば、次のように設定すると、ハイライトモードが常に有効になります。</p><pre tabindex=0><code>option default --color=always
</code></pre><p>さらに、行番号を表示させたければ、このようにします。default の定義が複数行あった場合には、最後の定義だけが有効になります。</p><pre tabindex=0><code>option default --color=always -n
</code></pre><h2 id=option-オリジナルオプション>option: オリジナルオプション</h2><p>自分でオリジナルのオプションを定義することもできます。次のように設定しておけば <code>--sushi</code> と書くだけで、そこに定義したオプション指定したことになります。</p><pre tabindex=0><code>option --sushi --outside &#39;^\S+&#39; --exclude &#39;^お子様セット.*&#39;
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/ee2dab7d-b5f1-6f21-580a-44be630fe7bf.png alt=image.png></p><p><code>-do</code> はデバッグ用のオプションで、最終的に実行されるオプションを表示します。</p><h2 id=define-マクロ定義>define: マクロ定義</h2><p>複雑なオプションを定義する際には、マクロによる文字列置換を使用することができます。</p><pre tabindex=0><code>define {base03}  #002b36
define {base02}  #073642
define {base01}  #586e75
define {base00}  #657b83
define {base0}   #839496
define {base1}   #93a1a1
define {base2}   #eee8d5
define {base3}   #fdf6e3
define {yellow}  #b58900
define {orange}  #cb4b16
define {red}     #dc322f
define {magenta} #d33682
define {violet}  #6c71c4
define {blue}    #268bd2
define {cyan}    #2aa198
define {green}   #859900

option  --solarized \
        --cm {yellow}  \
        --cm {orange}  \
        --cm {red}     \
        --cm {magenta} \
        --cm {violet}  \
        --cm {blue}    \
        --cm {cyan}    \
        --cm {green}
</code></pre><h2 id=autoload-モジュールの自動読み込み>autoload: モジュールの自動読み込み</h2><p><code>autoload</code> は、モジュールを自動的に読み込むための命令です。次の設定は <code>--dig</code> および <code>--git</code> オプションは <code>dig</code> モジュールで定義されていることを指示します。<code>--dig</code> オプションは <code>-Mdig --dig</code> に展開され、<code>dig</code> モジュールが自動的に読み込まれます。</p><pre tabindex=0><code>autoload -Mdig --dig --git
</code></pre><h2 id=__perl__-任意コードの実行><code>__PERL__</code>: 任意コードの実行</h2><p><code>.greplerc</code> の中に <code>__PERL__</code> という文字列があると、それより後の内容を Perl プログラムとして評価します。</p><p>greple のオプションの中には、任意の関数を呼び出すことができるものがあります。たとえば <code>--begin</code> オプションを使うと、ファイルを検索する前にその内容に対して行う処理を指定することができます。</p><p><code>.greplerc</code> に次のようなコードを用意したとします。</p><pre tabindex=0><code>__PERL__
sub remove_header {
    s/\A---\n(.+\n)+---\n\n*//;
}
</code></pre><p>すると、次のようにして、マークダウンファイルを検索する前に、ヘッダ部分を削除することができます。</p><pre tabindex=0><code>greple --begin &#39;&amp;remove_header&#39; *.md
</code></pre><p>他の言語にも対応できるように、このような形式にしていますが、今のところ対応しているのは　Perl だけです。</p><h2 id=まとめ>まとめ</h2><p>greple の初期設定ファイル .greplerc について紹介しました。</p><p>オプションを組み合わせることで、様々なタイプのデータに対応する複雑な処理を実現することができますが、どうしてもコマンド行が複雑化してきます。.greplerc に自分でよく使うオリジナルオプションを定義することで、作業を効率化することができます。</p><p>デフォルトオプションについては、.greplerc に記述する以外に、<code>GREPLEOPTS</code> という環境変数を設定する方法もあります。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d</a></li><li><a href=https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64>https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64</a></li><li><a href=https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c>https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c</a></li><li><a href=https://qiita.com/kaz-utashiro/items/25a14e75380c39b5e0af>https://qiita.com/kaz-utashiro/items/25a14e75380c39b5e0af</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3647e986fe9e3d773ea005ac779891c5>13 - カラーオプション</h1><p>greple は、複数のハイライトカラーを使って結果を表示することができます。これまで紹介したような、検索キーワードの色分け以外にも、様々な色の指定が可能です。今回は、色の指定方法について紹介します。</p><h2 id=カラーマップ>カラーマップ</h2><p>greple の色情報はカラーマップで管理され、その中にはインデックスリストと名前付きのリストという2種類の要素があります。つまり、リストとハッシュです。</p><p><code>-dc</code> というデバッグオプションを使うと、カラーマップ情報を見ることができます。デフォルトのカラーマップはこうです。</p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/03d5c09f-4f59-dc16-558b-ccf58a0c430e.png alt=image.png></p><p>最初に表示されているのが名前付きリストで、ファイル名 (<code>FILE</code>) や行番号 (<code>LINE</code>) の表示色に関する情報を保持しています。</p><p>次にあるのがインデックスリストで、検索した文字列をハイライトするために使われます。</p><h2 id=--colormap---cm-オプション>&ndash;colormap, &ndash;cm オプション</h2><p>カラーマップは <code>--colormap</code> オプションで指定します。ちょっと長いので <code>--cm</code> と省略することもできます。デフォルトのカラーマップは、次のように指定したのと同じです。</p><pre tabindex=0><code>--cm BLOCKEND=/WE,FILE=G,LINE=Y,PROGRESS=B,TEXT= \
--cm 000D/544,000D/454,000D/445 \
--cm 000D/455,000D/545,000D/554 \
--cm 000D/543,000D/453,000D/435,000D/534,000D/354,000D/345 \
--cm 000D/444,000D/433,000D/343,000D/334 \
--cm 000D/344,000D/434,000D/443,000D/333
</code></pre><p>1行目の名前付きのリストは <code>NAME=color</code> という形式、2行目以下のインデックスリストはラベルなしの <code>color</code> だけです。複数の要素をカンマで区切って同時に指定することができます。<code>--cm</code> オプションは繰り返し使うことができるので、上の例では分けて書いてありますが、1つにまとめてしまっても構いません。</p><p>簡単に説明すると、G (Green), Y (Yellow) などの基本の色、D (ボールド) のような効果、544 のように 0-5 の数字3桁で表された216色で指定されています。スラッシュ (<code>/</code>) の左がフォアグラウンド、右側はバックグラウンドカラーです。</p><h2 id=色の指定>色の指定</h2><h3 id=基本-16色>基本 16色</h3><pre tabindex=0><code>    R  r   Red
    G  g   Green
    B  b   Blue
    C  c   Cyan
    M  m   Magenta
    Y  y   Yellow
    K  k   Black
    W  w   White
</code></pre><p>大文字は、赤、緑、青、シアン、マジェンタ、黄、黒、白の基本の8色です。小文字は代替色を意味しますが、多くの端末では基本色よりも明るい色が指定されています。</p><h3 id=rgb-6x6x6-216色>RGB 6x6x6 216色</h3><pre tabindex=0><code>    000 .. 555         : 6x6x6 RGB 216 colors
</code></pre><p>RGB 値を0から5の数字で表した216色です。</p><p>慣れると案外わかりやすくて、555は白、R以外を0にして500なら原色の赤。GとBの値を増やすと白に近づいて544は淡い赤という具合です。RGB と CMY のポジションが対応していて、R　の部分を落とした055は、補色のシアン、Bを落として550なら黄色になります。1つだけ大きければ RGB、1つだけ小さければ CMY と憶えるとわかりやすいと思います。</p><p>基本のカラーマップは RGB に 543 のどれかを当てた組み合わせをバックグラウンドカラーとしています。</p><h3 id=グレースケール-24色>グレースケール 24色</h3><p><code>L01</code> から <code>L24</code> は、24階調のグレースケールです。<code>L00</code> は黒 (<code>000</code>)、<code>L25</code> は白 (<code>555</code>) と同じです。<code>W</code> や <code>w</code> は、真っ白とは限りません。</p><pre tabindex=0><code>    L00 .. L25         : Black (L00), 24 grey levels, White (L25)
</code></pre><h3 id=12ビット24ビット-rgb>12ビット/24ビット RGB</h3><p>RGB を10進や16進の、12ビット値あるいは24ビット値で指定することもできます。ただし、256色表示の端末では表示できないので、その場合は近似する216色に変換して表示します。</p><pre tabindex=0><code>    (255,255,255)      : 24bit decimal RGB colors
    #000000 .. #FFFFFF : 24bit hex RGB colors
    #000    .. #FFF    : 12bit hex RGB 4096 colors
</code></pre><h3 id=名前>名前</h3><p><a href=https://en.wikipedia.org/wiki/X11_color_names>https://en.wikipedia.org/wiki/X11_color_names</a> で定義されている名前で色を指定することができます。</p><pre tabindex=0><code>    &lt;red&gt; &lt;blue&gt; &lt;green&gt; &lt;cyan&gt; &lt;magenta&gt; &lt;yellow&gt;
    &lt;aliceblue&gt; &lt;honeydue&gt; &lt;hotpink&gt; &lt;mooccasin&gt;
    &lt;medium_aqua_marine&gt;
</code></pre><h3 id=効果>効果</h3><p>色以外の効果を指定することもできます。よく使うのはボールド(<code>D</code>)、イタリック(<code>I</code>)、アンダーライン(<code>U</code>)、反転(<code>S</code>)あたりでしょうか。見えなくする <code>H</code> や、見え消し線を引く <code>X</code> はサポートされていない端末もありますが、使い方によっては効果的です。点滅(<code>F</code>)は面白いけど、うるさいのであまり使いません。早い点滅 (Q) をサポートしている端末は見たことがありません。</p><pre tabindex=0><code>    N    None
    Z  0 Zero (reset)
    D  1 Double strike (boldface)
    P  2 Pale (dark)
    I  3 Italic
    U  4 Underline
    F  5 Flash (blink: slow)
    Q  6 Quick (blink: rapid)
    S  7 Stand out (reverse video)
    H  8 Hide (concealed)
    X  9 Cross out
    E    Erase Line

    ;    No effect
    /    Toggle foreground/background
    ^    Reset to foreground
</code></pre><p>行消去の <code>E</code> は特殊で、文字の属性を定義するものではありません。これを指定すると、色設定のシークエンスと同時に、カーソルがある場所から行末までを消去するシークエンスを出力します。文字を消すのと同時に背景色で埋めるので、その色の線が引かれたように見えます。最初の例の <code>BLOCKEND</code> で使われています。</p><h2 id=ansi-256色-ターミナルカラー>ANSI 256色 ターミナルカラー</h2><p>標準的な256色表示のANSI端末は、これまでに説明した基本の16色、6階調の RGB 216色、24階調のグレースケールを表示することができます。これは、次のコマンドで一覧することができます。</p><pre tabindex=0><code>perl -MGetopt::EX::Colormap=:all -E colortable
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/542cd6ad-e187-dca5-a9d0-91c934e7140c.png alt=image.png></p><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/1ee056a7-58fa-56df-4c40-ac813e644459.png alt=image.png></p><h2 id=フルカラーターミナル>フルカラーターミナル</h2><p>24ビットフルカラーに対応している端末では、フルカラーの指定をそのまま出力することができます。Apple の標準ターミナルは256色表示ですが、iTerm2 などはフルカラー表示が可能です。greple は、<code>COLORTERM</code> という環境変数に <code>truecolor</code> という値が設定されていると、フルカラー端末であると認識します。</p><h2 id=まとめ>まとめ</h2><p>greple は、複数の色を扱えることが特徴の１つです。しかし、色の指定が煩雑だと使いこなすのが難しいので、シンプルで統一的な方法で指定できるように工夫しています。現在は、色を管理する部分を切り出して <code>Getopt::EX::Colormap</code> という独立したモジュールでリリースしています。</p><h2 id=see-also>SEE ALSO</h2><p><a href=https://qiita.com/advent-calendar/2021/greple>https://qiita.com/advent-calendar/2021/greple</a></p><ol><li><a href=https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5>https://qiita.com/kaz-utashiro/items/5b6bcbe54891b3bd9db5</a></li><li><a href=https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3>https://qiita.com/kaz-utashiro/items/eb8c7067e6de34842fe3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1>https://qiita.com/kaz-utashiro/items/165e744d4250adedc4c1</a></li><li><a href=https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703>https://qiita.com/kaz-utashiro/items/439e6abcecf36c520703</a></li><li><a href=https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069>https://qiita.com/kaz-utashiro/items/24ac0b8fdd30b598e069</a></li><li><a href=https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3>https://qiita.com/kaz-utashiro/items/a1ba4e3d07cf37dc25e3</a></li><li><a href=https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771>https://qiita.com/kaz-utashiro/items/0c8c944c17a72724b771</a></li><li><a href=https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d>https://qiita.com/kaz-utashiro/items/8783c2fd0cc4315b9a3d</a></li><li><a href=https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64>https://qiita.com/kaz-utashiro/items/84f5a6be6bf996076c64</a></li><li><a href=https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c>https://qiita.com/kaz-utashiro/items/ebc7ea99f800cfc8c90c</a></li><li><a href=https://qiita.com/kaz-utashiro/items/25a14e75380c39b5e0af>https://qiita.com/kaz-utashiro/items/25a14e75380c39b5e0af</a></li><li><a href=https://qiita.com/kaz-utashiro/items/ebbeb8a5538a15ff04fc>https://qiita.com/kaz-utashiro/items/ebbeb8a5538a15ff04fc</a></li></ol><ul><li><a href=https://github.com/kaz-utashiro/greple>https://github.com/kaz-utashiro/greple</a></li><li><a href=https://metacpan.org/dist/App-Greple>https://metacpan.org/dist/App-Greple</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-94222baf73909a02fdd3684609a95d37>14 - カラーオプション（続き）</h1><h2 id=色についてもっと色々>色についてもっと色々</h2><p>前回は、カラーマップを指定する <code>--colormap</code> オプションと、色の指定の仕方について紹介しました。今回は、色を扱う様々なオプションについて紹介します。</p><h2 id=--colormap>&ndash;colormap</h2><p>greple のカラーマップには、名前付きカラーと、インデックスカラーの2種類があり、どちらも <code>--colormap</code> (<code>--cm</code>) オプションで設定することができました。今回紹介するのは、マッチしたパターンをハイライトするために使用されるうインデックスカラーに関するものです。</p><h2 id=--regioncolor---ri>&ndash;regioncolor, &ndash;ri</h2><p>以前に、複数の検索範囲を指定すると、それぞれの領域に別の色が割り当てられる例を紹介しました。</p><pre><code>greple -n --inside '^\S+' --outside '^\S+' '[ー\p{Katakana}]+' sushi.txt
</code></pre><p><img src=https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/36551/93d1783b-a8e0-59a4-4acf-9ab8e9276dae.png alt=image.png></p>